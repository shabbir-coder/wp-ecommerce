"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[817],{7817:(Z,u,s)=>{s.r(u),s.d(u,{ProfileModule:()=>P});var m=s(6814),l=s(2098),r=s(95),e=s(5678),c=s(9862),p=s(2096),f=s(9947);let d=(()=>{class o{constructor(t){this.http=t,this.apiUrl=f.N.apiUrl}getHeaders(){const t=localStorage.getItem("authToken");return new c.WM({"Content-Type":"application/json",Authorization:`${t}`})}updateProfile(t){return this.http.put(`${this.apiUrl}/users/update-profile`,t,{headers:this.getHeaders()})}updatePassword(t){return this.http.put(`${this.apiUrl}/users/update-password`,t,{headers:this.getHeaders()})}getProfileData(){return(0,p.of)(JSON.parse(localStorage.getItem("userInfo")))}static#e=this.\u0275fac=function(i){return new(i||o)(e.LFG(c.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var a=s(1806);const h=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:(()=>{class o{constructor(t,i,n){this.apiService=t,this.fb=i,this.router=n,this.title="Update Profile"}ngOnInit(){this.apiService.getProfileData().subscribe(t=>{this.profileForm=this.fb.group({name:[t.name||"",[r.kI.required]],email:[t.email||"",[r.kI.required,r.kI.email]],phoneNo:[t.phoneNo||"",[r.kI.required,r.kI.pattern("[0-9]{12}")]]})})}onSubmit(){this.profileForm.invalid||this.apiService.updateProfile(this.profileForm.value).subscribe(t=>{console.log(t),localStorage.setItem("userInfo",JSON.stringify(t.user)),this.router.navigate(["/dashboard"]).then()})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(d),e.Y36(r.qu),e.Y36(l.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-profile"]],decls:23,vars:2,consts:[[1,"fade-in"],[1,"container","mt-2"],[1,"d-flex","justify-content-between"],[1,"divider","my-2"],["cForm","",3,"formGroup"],[1,"mb-3"],["cLabel","","for","name"],["cFormControl","","id","name","placeholder","name@example.com","type","text","formControlName","name"],["cLabel","","for","email"],["cFormControl","","id","email","placeholder","name@example.com","type","email","formControlName","email"],["cLabel","","for","phone"],["cFormControl","","id","phone","placeholder","91000000000","type","number","formControlName","phoneNo"],["cButton","","color","primary","variant","outline",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"c-card")(2,"c-card-body")(3,"div",1)(4,"div",2)(5,"h4"),e._uU(6),e.qZA()()(),e._UZ(7,"div",3),e.TgZ(8,"form",4)(9,"div",5)(10,"label",6),e._uU(11,"Name"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"div",5)(14,"label",8),e._uU(15,"Email address"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",5)(18,"label",10),e._uU(19,"Phone Number"),e.qZA(),e._UZ(20,"input",11),e.qZA()(),e.TgZ(21,"button",12),e.NdJ("click",function(){return n.onSubmit()}),e._uU(22,"Save"),e.qZA()()()()),2&i&&(e.xp6(6),e.Oqu(n.title),e.xp6(2),e.Q6J("formGroup",n.profileForm))},dependencies:[a.$_X,a.oHf,a.eFW,a.AkF,a.yue,a.Hq3,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u]})}return o})()},{path:"password",component:(()=>{class o{constructor(t,i,n){this.apiService=t,this.fb=i,this.router=n,this.title="Change Password"}ngOnInit(){this.apiService.getProfileData().subscribe(t=>{this.form=this.fb.group({oldPassword:["",[r.kI.required]],confirmPassword:["",[r.kI.required]],newPassword:["",[r.kI.required]]})})}onSubmit(){this.form.value.newPassword==this.form.value.confirmPassword&&(this.form.invalid||this.apiService.updatePassword(this.form.value).subscribe(t=>{console.log(t),localStorage.setItem("userInfo",JSON.stringify(t.user)),this.router.navigate(["/dashboard"]).then()}))}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(d),e.Y36(r.qu),e.Y36(l.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-change-password"]],decls:23,vars:2,consts:[[1,"fade-in"],[1,"container","mt-2"],[1,"d-flex","justify-content-between"],[1,"divider","my-2"],["cForm","",3,"formGroup"],[1,"mb-3"],["cLabel","","for","oldPass"],["cFormControl","","id","oldPass","type","password","formControlName","oldPassword"],["cLabel","","for","newPass"],["cFormControl","","id","newPass","type","password","formControlName","newPassword"],["cLabel","","for","confirmPass"],["cFormControl","","id","confirmPass","type","password","formControlName","confirmPassword"],["cButton","","color","primary","variant","outline",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"c-card")(2,"c-card-body")(3,"div",1)(4,"div",2)(5,"h4"),e._uU(6),e.qZA()()(),e._UZ(7,"div",3),e.TgZ(8,"form",4)(9,"div",5)(10,"label",6),e._uU(11,"Old Password"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"div",5)(14,"label",8),e._uU(15,"New Password"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",5)(18,"label",10),e._uU(19,"Confirm Password"),e.qZA(),e._UZ(20,"input",11),e.qZA()(),e.TgZ(21,"button",12),e.NdJ("click",function(){return n.onSubmit()}),e._uU(22,"Save & Update"),e.qZA()()()()),2&i&&(e.xp6(6),e.Oqu(n.title),e.xp6(2),e.Q6J("formGroup",n.form))},dependencies:[a.$_X,a.oHf,a.eFW,a.AkF,a.yue,a.Hq3,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return o})()}];let g=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(h),l.Bz]})}return o})();var v=s(1272);let P=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[m.ez,g,a.ejP,a.dTQ,a.zE6,v.QX,a.hJ1,a.gzQ,a.z8t,a.ejP,c.JF,r.UX]})}return o})()}}]);