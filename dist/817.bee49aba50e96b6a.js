"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[817],{7817:(b,d,a)=>{a.r(d),a.d(d,{ProfileModule:()=>Z});var h=a(6814),c=a(8642),o=a(95),t=a(5678),u=a(9862),f=a(2096),g=a(9947);let m=(()=>{class r{constructor(e){this.http=e,this.apiUrl=g.N.apiUrl}getHeaders(){const e=localStorage.getItem("authToken");return new u.WM({"Content-Type":"application/json",Authorization:`${e}`})}updateProfile(e){return this.http.put(`${this.apiUrl}/users/update-profile`,e,{headers:this.getHeaders()})}updatePassword(e){return this.http.put(`${this.apiUrl}/users/update-password`,e,{headers:this.getHeaders()})}getProfileData(){return(0,f.of)(JSON.parse(localStorage.getItem("userInfo")))}static#t=this.\u0275fac=function(s){return new(s||r)(t.LFG(u.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var p=a(886),i=a(1806);const v=[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:(()=>{class r{constructor(e,s,n,l){this.apiService=e,this.fb=s,this.router=n,this.toaster=l,this.title="Update Profile"}ngOnInit(){this.apiService.getProfileData().subscribe(e=>{this.profileForm=this.fb.group({name:[e.name||"",[o.kI.required]],email:[e.email||"",[o.kI.required,o.kI.email]],phoneNo:[e.phoneNo||"",[o.kI.required,o.kI.pattern("[0-9]{12}")]]})})}onSubmit(){this.profileForm.invalid||this.apiService.updateProfile(this.profileForm.value).subscribe(e=>{this.toaster.showSuccess("Profile Updated Successfully"),localStorage.setItem("userInfo",JSON.stringify(e.user)),this.toaster.profileUpdated$.next(null),this.router.navigate(["/dashboard"]).then()},e=>{this.toaster.showSuccess(e?.error?.message||"Something went wrong")})}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(m),t.Y36(o.qu),t.Y36(c.F0),t.Y36(p.h))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-user-profile"]],decls:23,vars:2,consts:[[1,"fade-in"],[1,"container","mt-2"],[1,"d-flex","justify-content-between"],[1,"divider","my-2"],["cForm","",3,"formGroup"],[1,"mb-3"],["cLabel","","for","name"],["cFormControl","","id","name","placeholder","name@example.com","type","text","formControlName","name"],["cLabel","","for","email"],["cFormControl","","id","email","placeholder","name@example.com","type","email","formControlName","email"],["cLabel","","for","phone"],["cFormControl","","id","phone","placeholder","91000000000","type","number","formControlName","phoneNo"],["cButton","","color","primary","variant","outline",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"c-card")(2,"c-card-body")(3,"div",1)(4,"div",2)(5,"h4"),t._uU(6),t.qZA()()(),t._UZ(7,"div",3),t.TgZ(8,"form",4)(9,"div",5)(10,"label",6),t._uU(11,"Name"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",5)(14,"label",8),t._uU(15,"Email address"),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.TgZ(17,"div",5)(18,"label",10),t._uU(19,"Phone Number"),t.qZA(),t._UZ(20,"input",11),t.qZA()(),t.TgZ(21,"button",12),t.NdJ("click",function(){return n.onSubmit()}),t._uU(22,"Save"),t.qZA()()()()),2&s&&(t.xp6(6),t.Oqu(n.title),t.xp6(2),t.Q6J("formGroup",n.profileForm))},dependencies:[i.$_X,i.oHf,i.eFW,i.AkF,i.yue,i.Hq3,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u]})}return r})()},{path:"password",component:(()=>{class r{constructor(e,s,n,l){this.apiService=e,this.fb=s,this.router=n,this.toaster=l,this.title="Change Password"}ngOnInit(){this.apiService.getProfileData().subscribe(e=>{this.form=this.fb.group({oldPassword:["",[o.kI.required]],confirmPassword:["",[o.kI.required]],newPassword:["",[o.kI.required]]})})}onSubmit(){return this.form.value.newPassword!=this.form.value.confirmPassword?this.toaster.showError("Password and Confirm Password didn't match"):this.form.invalid?this.toaster.showError("All fields are required"):void this.apiService.updatePassword(this.form.value).subscribe(e=>{this.toaster.showSuccess("Password updated"),localStorage.setItem("userInfo",JSON.stringify(e.user)),this.router.navigate(["/dashboard"]).then()},e=>{this.toaster.showError(e?.error?.message||"Something went wrong")})}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(m),t.Y36(o.qu),t.Y36(c.F0),t.Y36(p.h))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-change-password"]],decls:23,vars:2,consts:[[1,"fade-in"],[1,"container","mt-2"],[1,"d-flex","justify-content-between"],[1,"divider","my-2"],["cForm","",3,"formGroup"],[1,"mb-3"],["cLabel","","for","oldPass"],["cFormControl","","id","oldPass","type","password","formControlName","oldPassword"],["cLabel","","for","newPass"],["cFormControl","","id","newPass","type","password","formControlName","newPassword"],["cLabel","","for","confirmPass"],["cFormControl","","id","confirmPass","type","password","formControlName","confirmPassword"],["cButton","","color","primary","variant","outline",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"c-card")(2,"c-card-body")(3,"div",1)(4,"div",2)(5,"h4"),t._uU(6),t.qZA()()(),t._UZ(7,"div",3),t.TgZ(8,"form",4)(9,"div",5)(10,"label",6),t._uU(11,"Old Password"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",5)(14,"label",8),t._uU(15,"New Password"),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.TgZ(17,"div",5)(18,"label",10),t._uU(19,"Confirm Password"),t.qZA(),t._UZ(20,"input",11),t.qZA()(),t.TgZ(21,"button",12),t.NdJ("click",function(){return n.onSubmit()}),t._uU(22,"Save & Update"),t.qZA()()()()),2&s&&(t.xp6(6),t.Oqu(n.title),t.xp6(2),t.Q6J("formGroup",n.form))},dependencies:[i.$_X,i.oHf,i.eFW,i.AkF,i.yue,i.Hq3,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return r})()}];let P=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(v),c.Bz]})}return r})();var w=a(1272);let Z=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[h.ez,P,i.ejP,i.dTQ,i.zE6,w.QX,i.hJ1,i.gzQ,i.z8t,i.ejP,u.JF,o.UX]})}return r})()}}]);